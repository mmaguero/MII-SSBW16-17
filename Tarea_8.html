<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>REST</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/prism.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/components/prism-python.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/components/prism-bash.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/components/prism-markup.min.js"></script>
<style>
p {text-indent: 0em;
   font-size: 120%;
   margin-top: 2em;
  }
</style>
</head>
<body>
<div class="container">
   <br>
   <h2>API REST</h2>
<p>
   En esta tarea añadiremos una API REST a nuestra aplicación, siguiendo el tutorial de la página
   <a href="https://medium.com/@vasjaforutube/django-mongodb-django-rest-framework-mongoengine-ee4eb5857b9a">Django + MongoDB = Django REST Framework Mongoengine</a>,
   y la documentación de <a href="https://github.com/umutbozkurt/django-rest-framework-mongoengine">Django Rest Framework Mongoengine</a>
</p>

<br />
<div class="highlight"><pre><code class="language-bash" data-lang="bash">$ pip install djangorestframework
$ pip install django-rest-framework-mongoengine
</code></pre></div>
<br />
y las añadimos a <b>settings.py</b>
<pre>
<code class="language-python" data-lang="python"><span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>
  <span class="s">...</span><span class="p">,</span>
  <span class="s">'registration'</span><span class="p">,</span>
  <span class="s">'rest_framework'</span><span class="p">,</span>
  <span class="s">'rest_framework_mongoengine'</span><span class="p">,</span>
  <span class="s">'restaurantes'</span><span class="p">,</span>
<span class="p">)</span></code>
</pre>
<br />

y hacemos un nuevo archivo <b>serializers.py</b> para el API, más o menos:
<pre><code class="language-python" data-lang="python">   from rest_framework_mongoengine import serializers
   from rest_framework_mongoengine import viewsets

   from .models import restaurants

   class restaurantsSerializer(serializers.DocumentSerializer):

       class Meta:
           model = restaurants
           fields = ('name', 'cuisine', 'borough', 'address', 'image')


   class restaurantsViewSet(viewsets.ModelViewSet):
       lookup_field = 'name'
       serializer_class = restaurantsSerializer

       def get_queryset(self):
           return restaurants.objects.all()

</code></pre>

<br />
y nos fañtaría añadir las rutas para el API en <b>urls.py</b>
<pre><code class="language-python" data-lang="python">   from rest_framework_mongoengine import routers

   from . import views
   from . import serializers

   # this is DRF router for REST API viewsets
   router = routers.DefaultRouter()

   # register REST API endpoints with DRF router
   router.register(r'restaurants', serializers.restaurantsViewSet, r"restaurants")


   urlpatterns = [
            ...
              # REST API root view (generated by DRF router)
              url(r'^api/', include(router.urls, namespace='api')),

   ]
</code></pre>

</div>
<br /><br />


</body>
</html>
